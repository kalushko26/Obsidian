____

tags: #JavaScript #окружение #DOM #BOM #объекты 

links: [[0005 Глобальный объект]] , [[1.2 DOM-дерево]]

links: [Браузерное окружение, спецификации](https://learn.javascript.ru/browser-environment) [[1.2 DOM-дерево]] , [Подробнее о BOM](https://html.spec.whatwg.org/)

_____

## Введение

Язык JavaScript изначально был создан для веб-браузеров. Но с тех пор он значительно эволюционировал и превратился в кроссплатформенный язык программирования для решения широкого круга задач.

Сегодня JavaScript может использоваться в браузере, на веб-сервере или в какой-то другой среде, даже в кофеварке. Каждая среда предоставляет свою функциональность, которую спецификация JavaScript называет #окружение

Окружение предоставляет свои объекты и дополнительные функции, в дополнение базовым языковым. Браузеры, например, дают средства для управления веб-страницами. #NodeJS.js делает доступными какие-то серверные возможности и так далее.

На картинке ниже в общих чертах показано, что доступно для JavaScript в браузерном окружении:

![[Pasted image 20230223141906.png]]

Как мы видим, имеется корневой объект `window`, который выступает в 2 ролях:

1.  Во-первых, это глобальный объект для JavaScript-кода, об этом говорится в [[0005 Глобальный объект]]
2.  Во-вторых, он также представляет собой окно браузера и располагает методами для управления им.

Например, здесь мы используем `window` как глобальный объект: #глобальный-объект
~~~
function sayHi() {  
	alert("Hello"); }  // глобальные функции доступны как методы глобального объекта: window.sayHi();`
~~~

А здесь мы используем `window` как объект окна браузера, чтобы узнать его высоту:
~~~
alert(window.innerHeight); // внутренняя высота окна браузера`
~~~

Существует гораздо больше свойств и методов для управления окном браузера. Мы рассмотрим их позднее.

## #DOM (Document Object Model)
Подробнее: [[1.2 DOM-дерево]]

Document Object Model, сокращённо #DOM – объектная модель документа, которая представляет все содержимое страницы в виде объектов, которые можно менять.

Объект `document` – основная «входная точка». С его помощью мы можем что-то создавать или менять на странице.

Например:
~~~
// заменим цвет фона на красный, 
document.body.style.background = "red";  // а через секунду вернём как было 
setTimeout(() => document.body.style.background = "", 1000);`
~~~
Мы использовали в примере только `document.body.style`, но на самом деле возможности по управлению страницей намного шире. Различные свойства и методы описаны в спецификации:

-   **DOM Living Standard** на [https://dom.spec.whatwg.org](https://dom.spec.whatwg.org/)

**DOM – не только для браузеров**

Спецификация #DOM описывает структуру документа и предоставляет объекты для манипуляций со страницей. Существуют и другие, отличные от браузеров, инструменты, использующие DOM.

Например, серверные скрипты, которые загружают и обрабатывают #HTML -страницы, также могут использовать DOM. При этом они могут поддерживать спецификацию не полностью.

#SSOM для стилей

Правила стилей #CSS структурированы иначе чем #HTML. Для них есть отдельная спецификация [CSSOM](https://www.w3.org/TR/cssom-1/), которая объясняет, как стили должны представляться в виде объектов, как их читать и писать.

#CSSOM используется вместе с DOM при изменении стилей документа. В реальности CSSOM требуется редко, обычно правила CSS статичны. Мы редко добавляем/удаляем стили из JavaScript, но и это возможно.

## #BOM (Browser Object Model)

Объектная модель браузера (Browser Object Model, BOM) – это дополнительные объекты, предоставляемые браузером (окружением), чтобы работать со всем, кроме документа.

Например:

-   Объект [navigator](https://developer.mozilla.org/ru/docs/Web/API/Window/navigator) даёт информацию о самом браузере и операционной системе. Среди множества его свойств самыми известными являются: `navigator.userAgent` – информация о текущем браузере, и `navigator.platform` – информация о платформе (может помочь в понимании того, в какой ОС открыт браузер – Windows/Linux/Mac и так далее).
-   Объект [location](https://developer.mozilla.org/ru/docs/Web/API/Window/location) позволяет получить текущий URL и перенаправить браузер по новому адресу.

Вот как мы можем использовать объект `location`:
~~~
alert(location.href); // показывает текущий URL 
if (confirm("Перейти на Wikipedia?")) {   
	location.href = "https://wikipedia.org"; // перенаправляет браузер на другой URL }`
~~~
Функции `alert/confirm/prompt` тоже являются частью BOM: они не относятся непосредственно к странице, но представляют собой методы объекта окна браузера для коммуникации с пользователем.

Спецификации

BOM является частью общей [спецификации HTML](https://html.spec.whatwg.org/).

Да, вы всё верно услышали. Спецификация HTML по адресу [https://html.spec.whatwg.org](https://html.spec.whatwg.org/) не только про «язык HTML» (теги, атрибуты), она также покрывает целое множество объектов, методов и специфичных для каждого браузера расширений DOM. Это всё «HTML в широком смысле». Для некоторых вещей есть отдельные спецификации, перечисленные на [https://spec.whatwg.org](https://spec.whatwg.org/).

## Итого

Говоря о стандартах, у нас есть:

Спецификация #DOM
описывает структуру документа, манипуляции с контентом и события, подробнее на [https://dom.spec.whatwg.org](https://dom.spec.whatwg.org/).

Спецификация #CSSOM
Описывает файлы стилей, правила написания стилей и манипуляций с ними, а также то, как это всё связано со страницей, подробнее на [https://www.w3.org/TR/cssom-1/](https://www.w3.org/TR/cssom-1/).

Спецификация #HTML
Описывает язык HTML (например, теги) и BOM (объектную модель браузера) – разные функции браузера: `setTimeout`, `alert`, `location` и так далее, подробнее на [https://html.spec.whatwg.org](https://html.spec.whatwg.org/). Тут берётся за основу спецификация DOM и расширяется дополнительными свойствами и методами.

Кроме того, некоторые классы описаны отдельно на [https://spec.whatwg.org/](https://spec.whatwg.org/).

Пожалуйста, заметьте для себя эти ссылки, так как по ним содержится очень много информации, которую невозможно изучить полностью и держать в уме.

Когда вам нужно будет прочитать о каком-то свойстве или методе, справочник на сайте Mozilla [https://developer.mozilla.org/ru/search](https://developer.mozilla.org/ru/search) тоже очень хороший ресурс, хотя ничто не сравнится с чтением спецификации: она сложная и объёмная, но сделает ваши знания максимально полными.

Для поиска чего-либо обычно удобно использовать интернет-поиск со словами «WHATWG [термин]» или «MDN [термин]», например [https://google.com?q=whatwg+localstorage](https://google.com/?q=whatwg+localstorage), [https://google.com?q=mdn+localstorage](https://google.com/?q=mdn+localstorage).

А теперь давайте перейдём к изучению DOM, так как страница – это основа всего.