---
title: Когда происходит ререндер состояния?
draft: false
tags:
  - "#React"
  - "#render"
  - "#props"
  - "#VirtualDOM"
  - "#forceUpdate"
info:
  - https://habr.com/ru/companies/timeweb/articles/684718/
  - https://ui.dev/why-react-renders
---
Существует 2 основные стадии, которым следует уделять пристальное внимание, когда речь заходит о производительности в `React`:

- первоначальный рендеринг (`initial rendering`) — происходит, когда компонент впервые появляется на экране;
- ререндеринг — второй и последующие рендеринги компонента.

_Ререндер состояния (re-render)_ происходит, когда происходит изменение состояния компонента или когда компонент получает новые свойства (props). _Изменения состояния влекут за собой безусловный (непредотвращаемый) ререндеринг_.

_Существует 5 причин, по которым компонент подвергается ререндерингу: 
1. изменение состояния, 
2. ререндеринг родительского компонента, 
3. изменение контекста, 
4. изменение хука,
5. принудительный вызов forceUpdate()**. 
   
_Существует распространенный миф о том, что ререндеринг происходит также при изменении пропсов - это не так._

Принудительный вызов `forceUpdate` возможен также и для функциональных компонентов, но для этого нужно смоделировать ситуацию следующим образом:

```jsx
const [, forceUpdate] = useReducer((x) => x + 1, 0)

const handleClick = () => {
  setValue((v) => Object.assign(v, { "new-field": "new-field-value" }))
  forceUpdate
}
```

Можно написать кастомный хук на `forceUpdate` = useForceUpdate()

---

[[004 ReactCore|Назад]]